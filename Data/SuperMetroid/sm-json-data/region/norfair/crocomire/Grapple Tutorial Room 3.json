{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 131,
  "name": "Grapple Tutorial Room 3",
  "area": "Norfair",
  "subarea": "Upper",
  "subsubarea": "Crocomire",
  "playable": true,
  "roomAddress": "0x7AB64",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x00194b6",
      "doorOrientation": "left",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 2,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x00194c2",
      "doorOrientation": "right",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 3,
      "name": "Junction Left of Green Gate",
      "nodeType": "junction",
      "nodeSubType": "junction"
    },
    {
      "id": 4,
      "name": "Center Platform Junction",
      "nodeType": "junction",
      "nodeSubType": "junction"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Grapple Tutorial Room 3 Gamets",
      "enemyName": "Gamet",
      "quantity": 5,
      "homeNodes": [1],
      "farmCycles": [
        {
          "name": "Crouch over Gamets",
          "cycleFrames": 120,
          "requires": []
        }
      ]
    },
    {
      "id": "e2",
      "groupName": "Grapple Tutorial Room 3 Puyos",
      "enemyName": "Puyo",
      "quantity": 5,
      "homeNodes": [4]
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Green Gate",
      "obstacleType": "inanimate"
    },
    {
      "id": "B",
      "name": "G-Mode Indirect Despawn Gate",
      "obstacleType": "abstract"
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3},
        {"id": 4}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3},
        {"id": 4}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 2},
        {"id": 4}
      ]
    },
    {
      "from": 4,
      "to": [
        {"id": 1},
        {"id": 3}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 4,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Leave With Runway - Frozen Gamet",
      "requires": [
        "h_canNavigateUnderwater",
        {"or": [
          "h_canTrickyFrozenEnemyRunway",
          {"and": [
            "h_canFrozenEnemyRunway",
            "Morph"
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 6,
          "openEnd": 0
        }
      },
      "note": [
        "Lure the Gamets up out of the water. It may be helpful to freeze them on the ascent to prevent them from separating and moving horizontally.",
        "Positioning is much easier with Morph; simply morph on the runway before they start separating.",
        "Freeze a Gamet while there is a half-tile gap between it and the runway in order to extend it as much as possible."
      ]
    },
    {
      "link": [1, 1],
      "name": "Gamet Farm",
      "requires": [
        {"refill": ["Energy", "Missile", "Super", "PowerBomb"]},
        {"obstaclesNotCleared": ["B"]}
      ]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Setup - Get Hit By Gamet",
      "requires": [
        "h_canNavigateUnderwater",
        {"or": [
          "Gravity",
          "HiJump",
          "canTrickyUseFrozenEnemies",
          "canTrickyJump"
        ]}
      ],
      "exitCondition": {
        "leaveWithGModeSetup": {}
      },
      "flashSuitChecked": true,
      "note": [
        "It is possible to lure the Gamets out of the water with nothing but ledge grabs."
      ]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Indirect Despawn the Gate",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": false
        }
      },
      "requires": [],
      "clearsObstacles": ["B"],
      "flashSuitChecked": true,
      "note": [
        "Cross the room while in indirect G-Mode and the gate will not be there.",
        "Note that if any of the Gamets are killed, none of them will respawn, but they can still be frozen and used as a platform.",
        "It is possible but difficult to cross either of the moats with Grapple before PLMs are overloaded, but not both of them."
      ]
    },
    {
      "link": [1, 2],
      "name": "Leave With Runway - Frozen Gamet",
      "requires": [
        "h_canNavigateUnderwater",
        "canTrickyJump",
        {"or": [
          "h_canTrickyFrozenEnemyRunway",
          {"and": [
            "h_canFrozenEnemyRunway",
            "Morph"
          ]}
        ]},
        {"or": [
          {"ammo": {"type": "Super", "count": 1}},
          {"obstaclesCleared": ["A"]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 9,
          "openEnd": 0
        }
      },
      "unlocksDoors": [
        {"types": ["ammo"], "requires": []}
      ],
      "note": [
        "Lure the Geemers up out of the water. It may be helpful to freeze them on the ascent to prevent them from separating and moving horizontally.",
        "At the top, position a Gamet flush with the central runway. Positioning is much easier with Morph; simply morph on the runway before they start separating.",
        "Freeze the Gamet before it begins moving horizontally, and it will be able to turn to the right.",
        "Use it as a frozen platform to cross both bodies of water.",
        "Lure the Gamet to the right and freeze it while there is a half-tile gap between it and the runway in order to extend it as much as possible."
      ]
    },
    {
      "link": [1, 2],
      "name": "G-Mode Setup - Get Hit By Gamet",
      "requires": [
        "h_canNavigateUnderwater",
        {"or": [
          {"resourceCapacity": [{"type": "Super", "count": 1}]},
          {"obstaclesCleared": ["A"]}
        ]},
        "canTrickyJump",
        {"or": [
          {"and": [
            "Gravity",
            "SpaceJump"
          ]},
          {"and": [
            "HiJump",
            "canSpaceJumpWaterBounce"
          ]},
          {"and": [
            "Gravity",
            "canPreciseGrapple"
          ]},
          {"and": [
            "Gravity",
            "canStaggeredWalljump",
            "canInsaneJump"
          ]},
          {"and": [
            "HiJump",
            "canPreciseGrapple",
            "canInsaneJump"
          ]},
          "canTrickyUseFrozenEnemies"
        ]}
      ],
      "exitCondition": {
        "leaveWithGModeSetup": {}
      },
      "flashSuitChecked": true,
      "unlocksDoors": [
        {"types": ["ammo"], "requires": []}
      ],
      "note": [
        "Carefully and quickly lure the Gamets to the right door without letting them go off camera.",
        "It may help to kill any extra Gamets once they spread apart."
      ]
    },
    {
      "link": [1, 2],
      "name": "G-Mode Indirect Morph IBJ Despawn the Gate",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": true
        }
      },
      "requires": [
        "Gravity",
        "h_canArtificialMorphIBJ"
      ],
      "flashSuitChecked": true
    },
    {
      "link": [1, 3],
      "name": "Enter Shinesparking",
      "entranceCondition": {
        "comeInWithSpark": {}
      },
      "requires": [
        {"shinespark": {"frames": 56, "excessFrames": 1}}
      ]
    },
    {
      "link": [1, 3],
      "name": "Shinespark, Come in Shinecharging",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 3,
          "openEnd": 1
        }
      },
      "requires": [
        "canHorizontalShinespark",
        {"shinespark": {"frames": 54, "excessFrames": 1}}
      ]
    },
    {
      "link": [1, 3],
      "name": "Grapple Tutorial 3 Frozen Gamet Bridge",
      "notable": true,
      "requires": [
        "canTrickyUseFrozenEnemies"
      ],
      "note": [
        "Lead a Gamet up through the water and freeze it to cross the first moat.",
        "Freeze the Gamet before it starts moving left.",
        "Wait for it to thaw and fly over the second moat where it can be frozen again."
      ]
    },
    {
      "link": [1, 3],
      "name": "Grapple Tutorial 3 Double Gamet Boost",
      "notable": true,
      "requires": [
        "h_canNavigateUnderwater",
        "canTrickyJump",
        "canHorizontalDamageBoost",
        {"enemyDamage": {
          "enemy": "Gamet",
          "type": "contact",
          "hits": 2
        }}
      ],
      "note": [
        "1- Stand near the farm point, on the edge of where you make Gamets spawn.",
        "2- Wait for the water position to be high.",
        "3- Move to make the Gamets spawn. Moonwalk is useful here.",
        "4- Quickly climb up to the last ledge before the door.",
        "5- Run, jump, dboost off a Gamet.",
        "6- Dboost a second time off the Gamet to cross the second moat."
      ]
    },
    {
      "link": [1, 3],
      "name": "Lenient SpringBall Bounce",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 6,
          "speedBooster": "any"
        }
      },
      "requires": [
        "canCarefulJump",
        "canMockball",
        "canSpringBallBounce"
      ],
      "note": [
        "With at least 6 tiles of run speed, jump over the first moat and MockBall into a regular springball jump over the second moat.",
        "Aim down before reaching the ceiling to increase the jump distance."
      ]
    },
    {
      "link": [1, 3],
      "name": "Tricky SpringBall Bounce",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 4,
          "speedBooster": "any"
        }
      },
      "requires": [
        "canTrickyJump",
        "canMockball",
        "canSpringBallBounce"
      ],
      "note": [
        "With around four tiles of run speed, jump over the first moat and MockBall into a regular springball jump over the second moat.",
        "SpeedBooster makes the jump possible with a shorter runway, but the trajectory is less predictable."
      ]
    },
    {
      "link": [1, 3],
      "name": "Insane SpringBall Bounce",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 2,
          "speedBooster": true
        }
      },
      "requires": [
        "canInsaneJump",
        "canMockball",
        "canSpringBallBounce"
      ],
      "note": [
        "With at least two tiles of run speed, jump over the first moat by maximizing the jump distance and then MockBall into a regular springball to jump over the second moat."
      ]
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph IBJ",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        "Gravity",
        "h_canArtificialMorphIBJ"
      ],
      "flashSuitChecked": true
    },
    {
      "link": [1, 4],
      "name": "Base",
      "requires": [
        {"or": [
          "SpaceJump",
          {"and": [
            "Grapple",
            {"obstaclesNotCleared": ["B"]}
          ]}
        ]}
      ],
      "devNote": [
        "It is possible to use one set of the Grapple blocks in G-Mode. Generally the second moat is harder to cross so the logic is only allowing it there.",
        "FIXME: It may be possible to cross the whole room with Grapple in G-Mode, but it would be very hard."
      ]
    },
    {
      "link": [1, 4],
      "name": "Gravity",
      "requires": [
        "Gravity",
        {"or": [
          "canWalljump",
          "HiJump",
          "canSpringBallJumpMidAir",
          "canIBJ",
          "canUseFrozenEnemies",
          "canGravityJump"
        ]}
      ]
    },
    {
      "link": [1, 4],
      "name": "Speed Jump",
      "requires": [
        "SpeedBooster",
        "canTrickyJump",
        {"or": [
          "canWalljump",
          "canLateralMidAirMorph"
        ]}
      ]
    },
    {
      "link": [1, 4],
      "name": "Little Run Speed Jump",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 2,
          "speedBooster": "any"
        }
      },
      "requires": [
        "canTrickyJump",
        {"or": [
          "canWalljump",
          "canLateralMidAirMorph"
        ]}
      ]
    },
    {
      "link": [1, 4],
      "name": "Some Run Speed Jump",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 4,
          "speedBooster": "any"
        }
      },
      "requires": [
        "canCarefulJump",
        {"or": [
          "canTrickyJump",
          "canWalljump",
          "canLateralMidAirMorph"
        ]}
      ]
    },
    {
      "link": [1, 4],
      "name": "Full Run Speed Jump",
      "entranceCondition": {
        "comeInRunning": {
          "minTiles": 6,
          "speedBooster": "any"
        }
      },
      "requires": [
        "canCarefulJump"
      ]
    },
    {
      "link": [1, 4],
      "name": "Grapple Tutorial Gamet Boost",
      "requires": [
        "h_canNavigateUnderwater",
        "canHorizontalDamageBoost",
        "canCarefulJump",
        {"or": [
          "Gravity",
          "HiJump",
          "canTrickyJump"
        ]},
        {"enemyDamage": {
          "enemy": "Gamet",
          "type": "contact",
          "hits": 1
        }}
      ],
      "note": [
        "1- Stand near the farm point, on the edge of where you make Gamets spawn.",
        "2- Wait for the water position to be high.",
        "3- Move to make the Gamets spawn. Moonwalking while facing the stairs is useful here.",
        "4- Quickly climb up to the last ledge before the door.",
        "5- Run, jump, dboost off a Gamet."
      ]
    },
    {
      "link": [1, 4],
      "name": "Suitless SpringBall Jump",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "h_canMaxHeightSpringBallJump"
      ],
      "note": "Wait for the water to be rising and perform a max height SpringBall Jump."
    },
    {
      "link": [2, 1],
      "name": "Grapple Teleport",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[5, 3], [7, 2]]
        }
      },
      "requires": []
    },
    {
      "link": [2, 1],
      "name": "Grapple Teleport Door Lock Skip",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[3, 12], [3, 13]]
        }
      },
      "requires": [],
      "bypassesDoorShell": true
    },
    {
      "link": [2, 1],
      "name": "Carry Grapple Teleport (Top Position)",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[3, 12]]
        }
      },
      "requires": [],
      "bypassesDoorShell": true,
      "exitCondition": {
        "leaveWithGrappleTeleport": {
          "blockPositions": [[3, 12]]
        }
      }
    },
    {
      "link": [2, 1],
      "name": "Carry Grapple Teleport (Bottom Position)",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[3, 13]]
        }
      },
      "requires": [],
      "bypassesDoorShell": true,
      "exitCondition": {
        "leaveWithGrappleTeleport": {
          "blockPositions": [[3, 13]]
        }
      }
    },
    {
      "link": [2, 1],
      "name": "Grapple Teleport X-Ray Climb",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[2, 18], [2, 19], [2, 28], [2, 29]]
        }
      },
      "requires": [
        "canXRayClimb"
      ],
      "bypassesDoorShell": true,
      "flashSuitChecked": true,
      "note": [
        "Exit the previous room with Samus in a standing pose (while grappled).",
        "After teleporting, press right to release Grapple while staying standing (not being forced into a crouch).",
        "Then X-ray climb to get up to the door transition, without needing to open the door."
      ]
    },
    {
      "link": [2, 2],
      "name": "Leave with Limited Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 4,
          "openEnd": 0
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Leave with Full Runway",
      "requires": [
        {"obstaclesCleared": ["A"]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 7,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ],
      "flashSuitChecked": true
    },
    {
      "link": [2, 2],
      "name": "G-Mode Indirect Despawn the Gate",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": false
        }
      },
      "requires": [],
      "clearsObstacles": ["B"],
      "flashSuitChecked": true
    },
    {
      "link": [2, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "h_canGreenGateGlitch",
          {"obstaclesCleared": ["A"]}
        ]}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [2, 3],
      "name": "Go Through Missing Gate",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ],
      "resetsObstacles": ["B"]
    },
    {
      "link": [2, 4],
      "name": "Go Through Missing Gate",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ],
      "resetsObstacles": ["B"]
    },
    {
      "link": [3, 2],
      "name": "Base",
      "requires": [
        {"or": [
          {"ammo": {"type": "Super", "count": 1}},
          {"obstaclesCleared": ["A"]}
        ]}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [3, 2],
      "name": "Go Through Missing Gate",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ],
      "resetsObstacles": ["B"]
    },
    {
      "link": [3, 4],
      "name": "Base",
      "requires": [
        {"obstaclesCleared": ["A"]}
      ]
    },
    {
      "link": [3, 4],
      "name": "Avoid Puyo",
      "requires": [
        {"or": [
          "Grapple",
          "SpaceJump",
          "canResetFallSpeed",
          {"and": [
            "canTrickyJump",
            "canLateralMidAirMorph"
          ]},
          {"and": [
            "Gravity",
            "canStaggeredWalljump"
          ]}
        ]}
      ],
      "resetsObstacles": ["B"]
    },
    {
      "link": [3, 4],
      "name": "Fight Puyo",
      "requires": [
        {"or": [
          {"enemyKill": {
            "enemies": [["Puyo"]],
            "explicitWeapons": [
              "Wave",
              "Ice+Spazer",
              "Plasma",
              "Missile",
              "Super",
              "Charge+Spazer"
            ]
          }},
          {"and": [
            "Gravity",
            {"enemyKill": {
              "enemies": [["Puyo"]],
              "explicitWeapons": ["ScrewAttack", "PseudoScrew"]
            }}
          ]},
          {"enemyDamage": {
            "enemy": "Puyo",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ],
      "resetsObstacles": ["B"],
      "note": "Kill either the leftmost puyo or jump into the right side of the water and fight all the puyos."
    },
    {
      "link": [4, 1],
      "name": "Base",
      "requires": []
    },
    {
      "link": [4, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "SpaceJump",
          {"and": [
            "Grapple",
            {"obstaclesNotCleared": ["B"]}
          ]},
          "canPreciseGrapple"
        ]}
      ]
    },
    {
      "link": [4, 3],
      "name": "Gravity",
      "requires": [
        "Gravity",
        {"or": [
          "canWalljump",
          "canGravityJump",
          "canIBJ",
          {"and": [
            "HiJump",
            "SpeedBooster"
          ]}
        ]}
      ]
    },
    {
      "link": [4, 3],
      "name": "Gravity and Ice",
      "requires": [
        "Gravity",
        "HiJump",
        "canTrickyUseFrozenEnemies",
        {"or": [
          "h_canCrouchJumpDownGrab",
          "Spazer",
          "Wave",
          "Plasma"
        ]}
      ],
      "note": "Either freeze the Puyos immediately on the stairs, or at the highest part of their jump to barely jump up to the ledge with HiJump."
    },
    {
      "link": [4, 3],
      "name": "Tricky Jump",
      "requires": [
        "canTrickyJump",
        {"or": [
          "canLateralMidAirMorph",
          "canInsaneWalljump",
          {"and": [
            "SpeedBooster",
            "canPreciseWalljump"
          ]}
        ]}
      ],
      "note": [
        "Run and jump at the very edge of the center platform.",
        "Wait for the water level to begin lowering to walljump on the far edge.",
        "An airball may be a little easier."
      ]
    },
    {
      "link": [4, 3],
      "name": "SpringFling",
      "requires": [
        "canCarefulJump",
        "canLateralMidAirMorph",
        "canSpringFling",
        "SpeedBooster"
      ]
    },
    {
      "link": [4, 3],
      "name": "Suitless Double SpringBall Jump",
      "requires": [
        "canSuitlessMaridia",
        "canTrickyJump",
        "h_canDoubleSpringBallJumpWithHiJump"
      ],
      "note": "Jump when the water level is at its lowest."
    }
  ]
}
